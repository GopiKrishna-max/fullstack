<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expense Tracker</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f4f4;
        padding: 20px;
    }
    header {
        background: #16a34a;
        color: black;
        text-align: center;
        padding: 12px;
        margin-bottom: 20px;
        border-radius: 8px;
        font-size: 20px;
        font-weight: bold;
    }
    h1 {
        text-align: center;
        margin-bottom: 20px;
        color: black;
    }
    .card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        border: 1px solid #ddd;
    }
    input, select, button {
        width: 100%;
        padding: 10px;
        margin-top: 8px;
        margin-bottom: 12px;
        font-size: 15px;
        border-radius: 5px;
        border: 1px solid #aaa;
    }
    button {
        background: #16a34a;
        color: black;
        cursor: pointer;
        font-weight: bold;
    }
    button:hover {
        background: #12873e;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
    }
    th, td {
        text-align: left;
        padding: 10px;
        border-bottom: 1px solid #ddd;
    }
    .actions button {
        width: auto;
        margin-right: 5px;
    }
    .filter-bar {
        display: flex;
        gap: 10px;
    }
</style>
</head>
<body>

<header id="currentMonth"></header>

<h1>Expense Tracker</h1>

<div class="card">
    <h3>Add Expense</h3>
    <form id="expenseForm">
        <input type="text" id="name" placeholder="Expense Name" required>
        <input type="number" id="amount" placeholder="Amount" required min="0" step="0.01">
        <select id="category" required>
            <option value="" disabled selected>Select Category</option>
            <option>Food</option>
            <option>Transport</option>
            <option>Shopping</option>
            <option>Entertainment</option>
            <option>Health</option>
            <option>Bills</option>
            <option>Other</option>
        </select>
        <input type="month" id="month" required>
        <button type="submit">Add</button>
    </form>
</div>

<div class="card">
    <h3>Filters</h3>
    <div class="filter-bar">
        <input type="text" id="search" placeholder="Search by name">
        <select id="filterCategory">
            <option value="">All Categories</option>
            <option>Food</option>
            <option>Transport</option>
            <option>Shopping</option>
            <option>Entertainment</option>
            <option>Health</option>
            <option>Bills</option>
            <option>Other</option>
        </select>
    </div>
</div>

<div class="card">
    <h3>Expense List</h3>
    <table id="expenseTable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Amount</th>
                <th>Category</th>
                <th>Month</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h3 id="total">Total: â‚¹0.00</h3>
</div>

<script>
    let expenses = JSON.parse(localStorage.getItem("expenses")) || [];
    let editIndex = -1;

    function updateHeaderMonth() {
        const now = new Date();
        const formatted = now.toLocaleDateString("en-US", {
            month: "long",
            year: "numeric"
        });
        document.getElementById("currentMonth").innerText = `ðŸ“… ${formatted}`;
    }
    updateHeaderMonth();

    function renderExpenses() {
        const tbody = document.querySelector("#expenseTable tbody");
        tbody.innerHTML = "";

        const searchValue = document.getElementById("search").value.toLowerCase();
        const filterCategory = document.getElementById("filterCategory").value;

        let total = 0;

        expenses.forEach((exp, i) => {
            if (
                (exp.name.toLowerCase().includes(searchValue)) &&
                (filterCategory === "" || exp.category === filterCategory)
            ) {
                total += parseFloat(exp.amount);

                const row = `
                    <tr>
                        <td>${exp.name}</td>
                        <td>â‚¹${parseFloat(exp.amount).toFixed(2)}</td>
                        <td>${exp.category}</td>
                        <td>${exp.month}</td>
                        <td class="actions">
                            <button onclick="editExpense(${i})">Edit</button>
                            <button onclick="deleteExpense(${i})">Delete</button>
                        </td>
                    </tr>`;
                tbody.innerHTML += row;
            }
        });

        document.getElementById("total").textContent = 
            `Total: â‚¹${total.toFixed(2)}`;
    }

    document.getElementById("expenseForm").addEventListener("submit", (e) => {
        e.preventDefault();

        const name = document.getElementById("name").value;
        const amount = document.getElementById("amount").value;
        const category = document.getElementById("category").value;
        const month = document.getElementById("month").value;

        if (editIndex === -1) {
            expenses.push({ name, amount, category, month });
        } else {
            expenses[editIndex] = { name, amount, category, month };
            editIndex = -1;
        }

        localStorage.setItem("expenses", JSON.stringify(expenses));
        document.getElementById("expenseForm").reset();
        renderExpenses();
    });

    function editExpense(i) {
        const exp = expenses[i];
        document.getElementById("name").value = exp.name;
        document.getElementById("amount").value = exp.amount;
        document.getElementById("category").value = exp.category;
        document.getElementById("month").value = exp.month;
        editIndex = i;
    }

    function deleteExpense(i) {
        expenses.splice(i, 1);
        localStorage.setItem("expenses", JSON.stringify(expenses));
        renderExpenses();
    }

    document.getElementById("search").addEventListener("input", renderExpenses);
    document.getElementById("filterCategory").addEventListener("change", renderExpenses);

    renderExpenses();
</script>

</body>
</html>
